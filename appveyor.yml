environment:
  APPVEYOR_RDP_PASSWORD: wowamazing
  matrix:
    - nodejs_version: '10'

init:
  - ps: iex ((new-object net.webclient).DownloadString('https://raw.githubusercontent.com/appveyor/ci/master/scripts/enable-rdp.ps1'))

install:
  - ps: Install-Product node $env:nodejs_version
  - npm install --global npm@latest
  - npm install --global ganache-cli truffle
  - set PATH=%APPDATA%\npm;%PATH%
  - npm install
matrix:
  fast_finish: true
build: off
shallow_clone: true
test_script:
  - node --version
  - npm --version
  - ps: Start-Process ganache-cli -WindowStyle Hidden
  - truffle test --network ganache
  - dir
  - ps: dir
  - ./node_modules/.bin/solidity-coverage
  - $(npm bin)/solidity-coverage
cache:
  - '%APPDATA%\npm-cache'